---
export interface Props {
    title: string;
    imageUrl: string;
    neodbUrl: string;
}

const { 
    title, 
    imageUrl, 
    neodbUrl
} = Astro.props;
---

<div class="simple-media-card group cursor-pointer">
    <div class="relative overflow-hidden rounded-lg shadow-md hover:shadow-lg transition-all duration-300">
        <!-- 封面图片 -->
        <div class="aspect-[3/4] overflow-hidden">
            <img 
                src={imageUrl} 
                alt={title}
                class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                loading="lazy"
            />
        </div>
        
        <!-- 标题 -->
        <div class="p-3">
            <h3 class="text-sm font-medium text-gray-900 dark:text-gray-100 line-clamp-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"> 
                <a href={neodbUrl} class="text-blue-500 hover:underline">{title}</a>
            </h3>
        </div>
    </div>
</div>

<style>
    .simple-media-card {
        @apply w-full max-w-32;
    }
    
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
</style>

{neodbUrl && (
    <script define:vars={{ neodbUrl }}>
        document.addEventListener('DOMContentLoaded', function() {
            const card = document.currentScript.previousElementSibling;
            if (card && neodbUrl) {
                card.addEventListener('click', function() {
                    window.open(neodbUrl, '_blank');
                });
                
                // 键盘支持
                card.setAttribute('tabindex', '0');
                card.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        window.open(neodbUrl, '_blank');
                    }
                });
            }
        });
    </script>
)}